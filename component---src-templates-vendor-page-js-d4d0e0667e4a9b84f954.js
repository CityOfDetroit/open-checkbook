(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{149:function(e,t,a){"use strict";a.r(t);a(193),a(76),a(56),a(37),a(182);var n=a(0),r=a.n(n),l=a(164),o=a.n(l),c=a(160),i=a(461),s=a(250),m=a(251),u=a(460),d=a(450),y=a(298),p=a(174),g=a(172),E=(a(77),a(249)),f=function(e){var t=e.agency,a=e.grouped,n=e.slug;return r.a.createElement("div",null,t," ",r.a.createElement(c.a,{to:"/agency/"+n},">>"),r.a.createElement("p",{style:{fontWeight:500}},(a[t]?a[t].length:"No")+" payments for "+(a[t]?p.a.floatToMoney(a[t].reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0)):"")))},h=function(e){var t=e.tableData,a=e.payments,n=o()(a).groupBy("agencyDesc").value();return r.a.createElement(E.a,null,r.a.createElement(E.a.Header,null,r.a.createElement(E.a.Row,null,r.a.createElement(E.a.HeaderCell,null,"Agency"),r.a.createElement(E.a.HeaderCell,{textAlign:"right"},"Total Payments"),r.a.createElement(E.a.HeaderCell,null,"Fund"),r.a.createElement(E.a.HeaderCell,null,"Cost Center"),r.a.createElement(E.a.HeaderCell,null,"Expense Category"),r.a.createElement(E.a.HeaderCell,null,"Expense"))),r.a.createElement(E.a.Body,null,Object.keys(t).map(function(e,a){return r.a.createElement(r.a.Fragment,null,Object.keys(t[e]).map(function(l,o){return r.a.createElement(E.a.Row,{key:a+o,style:{backgroundColor:a%2==0?"white":"#F9FAFB"}},0===o?r.a.createElement(E.a.Cell,{rowSpan:Object.keys(t[e]).length,content:r.a.createElement(f,{agency:e,grouped:n,slug:t[e][l][0].agencySlug}),style:{fontWeight:600},verticalAlign:"top"}):null,r.a.createElement(E.a.Cell,{textAlign:"right",content:p.a.floatToMoney(t[e][l].reduce(function(e,t){return e+t.amount},0))}),r.a.createElement(E.a.Cell,{content:l.split(",")[0]}),r.a.createElement(E.a.Cell,{content:l.split(",")[1]}),r.a.createElement(E.a.Cell,{content:l.split(",")[2]}),r.a.createElement(E.a.Cell,{content:l.split(",")[3]}))}))})))},v=a(179);a.d(t,"query",function(){return b});t.default=function(e){var t=e.data.postgres.vendor[0],a=t.payments,n=o()(t.payments).groupBy("costcenterDesc").value(),l=Object.keys(n).map(function(e,t){return{name:e,numPayments:n[e].length,sumPayments:n[e].reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0)}}),E=o()(l).orderBy("sumPayments","desc").value(),f=o.a.groupBy(t.payments,"objectDescShorthand"),b=[{key:"Home",content:r.a.createElement(c.a,{to:"/"},"Home")},{key:"Vendor",content:"Payee",link:!1},{key:""+t.vendorName,content:r.a.createElement(c.a,{to:"/vendor/"+t.vendorNumber},t.vendorName),active:!0}],C=o()(a).map(function(e){return{agencyName:e.agencyByAgencyCodeMasked.deptName,agencySlug:e.agencyByAgencyCodeMasked.deptSlug,amount:parseFloat(e.invoicePaymentDistAmount),categories:e.fundDesc+","+e.costcenterDesc+","+e.objectDescShorthand+","+e.objectDesc}}).value(),w=p.a.nest(C,["agencyName","categories"]);return r.a.createElement(g.a,{pageTitle:t.vendorName},r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:12},r.a.createElement(s.a,{basic:!0},r.a.createElement(m.a,{icon:"angle right",sections:b}),r.a.createElement(u.a,{as:"h2"},t.vendorName,r.a.createElement(u.a.Subheader,null,null!==t.payments[0].vendorType?t.payments[0].vendorType+" based in "+t.vendorAddress:""+t.vendorAddress))),t.passThroughPayee?r.a.createElement(d.a,{content:"The City of Detroit collects revenue on this entityâ€™s behalf and sends the revenue to this entity via these pass through payments."}):"")),r.a.createElement(i.a.Row,{columns:2},r.a.createElement(i.a.Column,{width:6},r.a.createElement(s.a,{basic:!0},r.a.createElement(u.a,{as:"h3"},"Top Cost Centers"),r.a.createElement(y.a,{ordered:!0,divided:!0,relaxed:!0},E.slice(0,5).map(function(e,t){return r.a.createElement(y.a.Item,{key:t},r.a.createElement(y.a.Content,null,r.a.createElement(y.a.Header,null,e.name),r.a.createElement(y.a.Description,null,e.numPayments.toLocaleString()," payments for ",p.a.floatToMoney(e.sumPayments))))})))),r.a.createElement(i.a.Column,{width:6},r.a.createElement(s.a,{basic:!0},r.a.createElement(u.a,{as:"h3"},"Total Payments by Expense Category"),r.a.createElement(y.a,{divided:!0,relaxed:!0},Object.keys(f).map(function(e,t){return r.a.createElement(y.a.Item,{key:t},r.a.createElement(y.a.Content,null,r.a.createElement(y.a.Header,null,e),r.a.createElement(y.a.Description,null,f[e].length.toLocaleString()," payments for ",p.a.floatToMoney(f[e].reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0)))))}))))),r.a.createElement(i.a.Row,null,r.a.createElement(i.a.Column,{width:12},r.a.createElement(s.a,{basic:!0},r.a.createElement(u.a,{as:"h3"},"Summary of All Payments",r.a.createElement(u.a.Subheader,null,t.payments.length.toLocaleString()," payments totaling ",p.a.floatToMoney(t.payments.reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0)))),r.a.createElement(h,{tableData:w,payments:a})))),r.a.createElement(v.a,null))};var b="80210986"},160:function(e,t,a){"use strict";a.d(t,"b",function(){return m});var n=a(0),r=a.n(n),l=a(4),o=a.n(l),c=a(33),i=a.n(c);a.d(t,"a",function(){return i.a}),a.d(t,"c",function(){return c.navigate});a(163);var s=r.a.createContext({}),m=function(e){return r.a.createElement(s.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};m.propTypes={data:o.a.object,query:o.a.string.isRequired,render:o.a.func,children:o.a.func}},163:function(e,t,a){var n;e.exports=(n=a(169))&&n.default||n},169:function(e,t,a){"use strict";a.r(t);a(36);var n=a(0),r=a.n(n),l=a(4),o=a.n(l),c=a(55),i=a(2),s=function(e){var t=e.location,a=i.default.getResourcesForPathnameSync(t.pathname);return a?r.a.createElement(c.a,Object.assign({location:t,pageResources:a},a.json)):null};s.propTypes={location:o.a.shape({pathname:o.a.string.isRequired}).isRequired},t.default=s},170:function(e){e.exports={data:{site:{siteMetadata:{title:"Open Checkbook Detroit"}}}}},171:function(e,t,a){e.exports=a.p+"static/cod-logo-3c15a0bdecbe50211480e8b9b7a32701.jpg"},172:function(e,t,a){"use strict";var n=a(170),r=a(0),l=a.n(r),o=a(4),c=a.n(o),i=a(183),s=a.n(i),m=a(160),u=a(461),d=a(449),y=a(460),p=a(164),g=a.n(p),E=a(171),f=a.n(E),h=function(e){var t=e.siteTitle;return l.a.createElement(u.a,{padded:!0,stackable:!0,centered:!0},l.a.createElement(u.a.Row,{style:{borderBottom:"5px solid #feb70d"}},l.a.createElement(u.a.Column,{width:12},l.a.createElement("header",null,l.a.createElement("div",{style:{margin:"0 auto",padding:"1rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"middle",flexWrap:"wrap"}},l.a.createElement("div",{style:{display:"flex",alignItems:"center"}},l.a.createElement("div",{style:{width:"70px"}},l.a.createElement("a",{href:"https://detroitmi.gov/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement(d.a,{src:f.a,style:{padding:0,margin:0,width:"100%",height:"auto"},alt:"city of detroit logo"}))),l.a.createElement(m.a,{className:"header-link",to:"/",style:{color:"black",textDecoration:"none",textAlign:"right"}},l.a.createElement(y.a,{as:"h2",style:{fontWeight:900}},g.a.toUpper(t)))),l.a.createElement(m.a,{to:"/",style:{color:"#004445",textDecoration:"none",marginLeft:"auto",marginRight:"3em",borderBottom:"1px dotted #18252a"}},"HOME"),l.a.createElement(m.a,{to:"/about/",style:{color:"#004445",textDecoration:"none",borderBottom:"1px dotted #18252a",marginRight:"3em"}},"ABOUT"),l.a.createElement(m.a,{to:"/drilldown/",prefetch:!1,style:{color:"#004445",textDecoration:"none",borderBottom:"1px dotted #18252a"}},"CHART"))))))},v=(a(187),function(e){var t=e.children,a=(e.data,e.pageTitle);return l.a.createElement(m.b,{query:"755544856",render:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,{title:a+": "+e.site.siteMetadata.title,meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]},l.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i,900&display=swap",rel:"stylesheet"})),l.a.createElement(h,{siteTitle:e.site.siteMetadata.title}),l.a.createElement(u.a,{padded:!0,stackable:!0,centered:!0},t))},data:n})});v.propTypes={children:c.a.node.isRequired};t.a=v},174:function(e,t,a){"use strict";var n=a(164),r=a.n(n),l=a(200),o=a.n(l),c={stringToMoney:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(e))},formatMoney:function(e){return o()(e).format("$0.0a").toUpperCase()},floatToMoney:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},nest:function(e,t){if(!t.length)return e;var a=t[0],n=t.slice(1);return r.a.mapValues(r.a.groupBy(e,a),function(e){return c.nest(e,n)})}};t.a=c},179:function(e,t,a){"use strict";var n=a(0),r=a.n(n),l=a(461);t.a=function(){return r.a.createElement(l.a.Row,{style:{background:"#f2f2f2",marginTop:"5em",height:"50px"}},r.a.createElement("span",{style:{width:"50px",marginTop:"-55px"}},r.a.createElement("img",{style:{maxWidth:"100%"},src:"https://detroitmi.gov/themes/custom/detroitmi/logo.png",alt:"City of Detroit logo"})))}}}]);
//# sourceMappingURL=component---src-templates-vendor-page-js-d4d0e0667e4a9b84f954.js.map