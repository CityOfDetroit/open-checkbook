(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{144:function(e,t,n){"use strict";n.r(t),n.d(t,"query",function(){return w});n(77),n(192),n(76),n(56),n(37),n(181),n(244);var a=n(0),r=n.n(a),o=n(155),i=n(163),l=n.n(i),s=n(459),c=n(460),d=n(449),u=n(248),m=n(458),p=n(171),y=n(172),f=n(246),h=n.n(f),g=n(417),b=n.n(g),v=n(418),E=n.n(v),x=n(178);"object"==typeof h.a&&E()(h.a);var w="1729665519";t.default=function(e){var t=e.data.postgres.allAgenciesList,n=l()(t).filter(function(e){return e.accountsPayablesByAgencyCodeMaskedList.length>0}).filter(function(e){return"Pass Through Payments"!==e.deptName}).filter(function(e){return"Non Departmental"!==e.deptName}).sortBy("totalAmount").reverse().value(),a=[];a.push({name:"Department",colorByPoint:!1,color:"#004445",dataLabels:{enabled:!0,formatter:function(){return y.a.formatMoney(this.y)}},data:n.map(function(e){return{name:e.deptNameShorthand,y:e.accountsPayablesByAgencyCodeMaskedList.reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0),drilldown:e.deptNameShorthand}}).sort(function(e,t){return e.y<t.y})});var i={drillUpButton:{position:{y:-40},theme:{fill:"transparent",states:{hover:{fill:"#9fd5b3"}},stroke:"transparent",strokeWidth:0,style:{color:"#18252a",cursor:"pointer",fontSize:"18px","text-decoration":"none","font-family":"Montserrat, sans-serif"}}},activeAxisLabelStyle:{color:"#18252a",cursor:"pointer",fontSize:"12px","text-decoration":"none","font-family":"Montserrat, sans-serif"},activeDataLabelStyle:{color:"white",cursor:"pointer",fontSize:"12px","text-decoration":"none","font-family":"Montserrat, sans-serif","font-weight":"400"},series:[]};n.forEach(function(e){var t=l.a.groupBy(e.accountsPayablesByAgencyCodeMaskedList,"costcenterDesc");i.series.push({id:e.deptNameShorthand,name:"Cost Center",colorByPoint:!1,color:"#279989",data:Object.keys(t).map(function(n){return{name:n,y:t[n].reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0),drilldown:e.deptNumber+"_"+n}}).sort(function(e,t){return e.y<t.y})}),Object.keys(t).forEach(function(n){var a=l.a.groupBy(t[n],"objectDescShorthand");i.series.push({id:e.deptNumber+"_"+n,name:"Expense Category",colorByPoint:!1,color:"#9fd5b3",data:Object.keys(a).map(function(t){return{name:t,y:a[t].reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0),drilldown:e.deptNumber+"_"+n+"_"+t}}).sort(function(e,t){return e.y<t.y})}),Object.keys(a).forEach(function(t){var r=l.a.groupBy(a[t],"vendorName");i.series.push({id:e.deptNumber+"_"+n+"_"+t,name:"Payee",colorByPoint:!1,color:"#feb70d",data:Object.keys(r).map(function(a){return{name:a,y:r[a].reduce(function(e,t){return e+parseFloat(t.invoicePaymentDistAmount)},0),drilldown:e.deptNumber+"_"+n+"_"+t+"_vendor"}}).sort(function(e,t){return e.y<t.y})})})})});var f={chart:{type:"bar",height:1400,events:{drilldown:function(e){if("vendor"!==e.point.drilldown.slice(-6)&&this.setTitle({text:"Total Payments by "+e.seriesOptions.name}),"vendor"===e.point.drilldown.slice(-6)){var t=e.point.drilldown.split("_"),n={agency:t[0],cc:t[1],expense:t[2],vendor:e.point.name};Object(o.c)("/table/",{state:{details:n}})}},drillup:function(e){this.setTitle({text:"Total Payments by "+e.seriesOptions.name})}}},style:{fontFamily:["Montserrat","sans-serif"]},title:{text:"Total Payments by Department",style:{"font-family":"Montserrat"}},xAxis:{type:"category",lineWidth:0,minorGridLineWidth:0,lineColor:"transparent",minorTickLength:0,tickLength:0},yAxis:{title:{text:"Total Payments",style:{"font-family":"Montserrat"}},labels:{style:{color:"#18252a",fontSize:"12px"}},lineWidth:0,minorGridLineWidth:0,gridLineColor:"transparent",lineColor:"transparent",minorTickLength:0,tickLength:0,scrollbar:{enabled:!0}},legend:{enabled:!1},credits:{enabled:!1},plotOptions:{series:{borderWidth:0,dataLabels:{enabled:!0,style:{"font-weight":"400","text-decoration":"none"},formatter:function(){return y.a.formatMoney(this.y)}}}},tooltip:{enabled:!1},series:a,drilldown:i};return r.a.createElement(p.a,{pageTitle:"Chart"},r.a.createElement(s.a.Row,null,r.a.createElement(s.a.Column,{width:12},r.a.createElement(c.a,{maxWidth:768,as:d.a,content:"This chart is best viewed on a desktop computer."}),r.a.createElement(u.a,{basic:!0},r.a.createElement(m.a,{as:"h1"},"Chart",r.a.createElement(m.a.Subheader,null,"Click on a bar to filter payments by their categories.")),r.a.createElement("p",null,"This visualization excludes ",r.a.createElement(o.a,{to:"/agency/non-departmental"},"Non Departmental")," payments, ",r.a.createElement(o.a,{to:"/agency/pass-throughs"},"Pass Through")," payments, and employee salary costs."),r.a.createElement(b.a,{highcharts:h.a,options:f})))),r.a.createElement(x.a,null))}},155:function(e,t,n){"use strict";n.d(t,"b",function(){return d});var a=n(0),r=n.n(a),o=n(4),i=n.n(o),l=n(33),s=n.n(l);n.d(t,"a",function(){return s.a}),n.d(t,"c",function(){return l.navigate});n(162);var c=r.a.createContext({}),d=function(e){return r.a.createElement(c.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};d.propTypes={data:i.a.object,query:i.a.string.isRequired,render:i.a.func,children:i.a.func}},162:function(e,t,n){var a;e.exports=(a=n(168))&&a.default||a},168:function(e,t,n){"use strict";n.r(t);n(36);var a=n(0),r=n.n(a),o=n(4),i=n.n(o),l=n(55),s=n(2),c=function(e){var t=e.location,n=s.default.getResourcesForPathnameSync(t.pathname);return n?r.a.createElement(l.a,Object.assign({location:t,pageResources:n},n.json)):null};c.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=c},169:function(e){e.exports={data:{site:{siteMetadata:{title:"Open Checkbook Detroit"}}}}},170:function(e,t,n){e.exports=n.p+"static/cod-logo-3c15a0bdecbe50211480e8b9b7a32701.jpg"},171:function(e,t,n){"use strict";var a=n(169),r=n(0),o=n.n(r),i=n(4),l=n.n(i),s=n(182),c=n.n(s),d=n(155),u=n(459),m=n(448),p=n(458),y=n(163),f=n.n(y),h=n(170),g=n.n(h),b=function(e){var t=e.siteTitle;return o.a.createElement(u.a,{padded:!0,stackable:!0,centered:!0},o.a.createElement(u.a.Row,{style:{borderBottom:"5px solid #feb70d"}},o.a.createElement(u.a.Column,{width:12},o.a.createElement("header",null,o.a.createElement("div",{style:{margin:"0 auto",padding:"1rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",alignContent:"middle",flexWrap:"wrap"}},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("div",{style:{width:"70px"}},o.a.createElement("a",{href:"https://detroitmi.gov/",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(m.a,{src:g.a,style:{padding:0,margin:0,width:"100%",height:"auto"},alt:"city of detroit logo"}))),o.a.createElement(d.a,{className:"header-link",to:"/",style:{color:"black",textDecoration:"none",textAlign:"right"}},o.a.createElement(p.a,{as:"h2",style:{fontWeight:900}},f.a.toUpper(t)))),o.a.createElement(d.a,{to:"/",style:{color:"#004445",textDecoration:"none",marginLeft:"auto",marginRight:"3em",borderBottom:"1px dotted #18252a"}},"HOME"),o.a.createElement(d.a,{to:"/about/",style:{color:"#004445",textDecoration:"none",borderBottom:"1px dotted #18252a",marginRight:"3em"}},"ABOUT"),o.a.createElement(d.a,{to:"/drilldown/",prefetch:!1,style:{color:"#004445",textDecoration:"none",borderBottom:"1px dotted #18252a"}},"CHART"))))))},v=(n(186),function(e){var t=e.children,n=(e.data,e.pageTitle);return o.a.createElement(d.b,{query:"755544856",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(c.a,{title:n+": "+e.site.siteMetadata.title,meta:[{name:"description",content:"Sample"},{name:"keywords",content:"sample, something"}]}),o.a.createElement(b,{siteTitle:e.site.siteMetadata.title}),o.a.createElement(u.a,{padded:!0,stackable:!0,centered:!0},t))},data:a})});v.propTypes={children:l.a.node.isRequired};t.a=v},172:function(e,t,n){"use strict";var a=n(163),r=n.n(a),o=n(199),i=n.n(o),l={stringToMoney:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(e))},formatMoney:function(e){return i()(e).format("$0.0a").toUpperCase()},floatToMoney:function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)},nest:function(e,t){if(!t.length)return e;var n=t[0],a=t.slice(1);return r.a.mapValues(r.a.groupBy(e,n),function(e){return l.nest(e,a)})}};t.a=l},178:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(459);t.a=function(){return r.a.createElement(o.a.Row,{style:{background:"#f2f2f2",marginTop:"5em",height:"50px"}},r.a.createElement("span",{style:{width:"50px",marginTop:"-55px"}},r.a.createElement("img",{style:{maxWidth:"100%"},src:"https://detroitmi.gov/themes/custom/detroitmi/logo.png",alt:"City of Detroit logo"})))}}}]);
//# sourceMappingURL=component---src-pages-drilldown-js-f57b998d5bd90eab92c6.js.map